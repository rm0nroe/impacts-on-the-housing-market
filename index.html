<!DOCTYPE html>
<meta charset="utf-8">
<meta name="viewport" content="initial-scale=1.0, user-scalable=yes"/>
<style>

html, body {
    width: 100%;
    height: 100%;
    background-color: #ffffff;
}

    
body {
    width: 100%;
    height: 100%;
    background-color: #ffffff;
}

#map {
    width: 70%; 
    height: 60%; 
    margin:0px auto; 
    display:flex;
}
.map-container {
    align-content: center;
    justify-content: center;
    position: relative;
    width: 80%;
    height: 70%;
    text-align: center;
    display: inline;
}    

.button-selections {
    text-align: center;
    margin-bottom: 10px;
}

.homes, .homes svg {
        position: absolute;
}

.homes svg {
        width: 60px;
        height: 20px;
        padding-right: 100px;
        font: 10px sans-serif;
}

.homes circle {
    fill: gold;
    stroke: black;
    stroke-width: 2px;
}
    
</style>
<head>
  <meta charset="utf-8">
  <title>Home Buying Helper</title>
  <base href="/">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="icon" type="image/x-icon" href="favicon.ico">
  <!-- CoreUI CSS -->
  <link rel="stylesheet" href="https://unpkg.com/@coreui/coreui/dist/css/coreui.min.css">
  <link rel="stylesheet" href="https://unpkg.com/@coreui/icons/css/coreui-icons.min.css">
  <link href="css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-white">
    
<!--Navigation bar-->
<nav class="navbar navbar-expand-lg navbar-dark bg-primary">
        <img src="zap.svg" style="margin-right: 10px;"/><a class="navbar-brand" href="#">Home Buying Helper</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
          <div class="navbar-nav">
            <img src="home.svg" style="margin-left: 10px;"/><a class="nav-item nav-link active" href="#">Home <span class="sr-only">(current)</span></a>
          </div>
        </div>
</nav>

    
<!-- Dropdown buttons for preferences  -->
<div style="text-align:center">
    <h2 class="display-4" style="margin-top: 10px">Home Buying Helper </h2>
    <p class="lead">Find your dream home with the information that matters.</p>
</div>
<div class="button-selections">
<div class="btn-group">
  <button type="button" class="btn btn-danger dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Bed(s)
  </button>
  <ul class="dropdown-menu">
    <li><a href="#">1+</a></li>
    <li><a href="#">2+</a></li>
    <li><a href="#">3+</a></li>
    <li><a href="#">4+</a></li>
  </ul>
</div>
<div class="btn-group">
    <button type="button" class="btn btn-danger dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Bath(s)</button>
      <ul class="dropdown-menu">
    <li><a href="#">1+</a></li>
    <li><a href="#">2+</a></li>
    <li><a href="#">3+</a></li>
    <li><a href="#">4+</a></li>
  </ul>
</div>
<div class="btn-group">
    <button type="button" class="btn btn-danger dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">School Rating</button>
      <ul class="dropdown-menu">
    <li><a href="#">2+ Stars</a></li>
    <li><a href="#">3+ Stars</a></li>
    <li><a href="#">4+ Stars</a></li>
  </ul>
</div>
<div class="btn-group">
    <button type="button" class="btn btn-danger dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Restaurant Quality</button>
      <ul class="dropdown-menu">
    <li><a href="#">3+ Stars</a></li>
    <li><a href="#">4+ Stars</a></li>
  </ul>
</div>
<div class="btn-group">
    <button type="button" class="btn btn-danger dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Square Feet of Unit</button>
      <ul class="dropdown-menu">
    <li><a href="#">1,000 to 2,000 Sq. Ft.</a></li>
    <li><a href="#">2,001 to 3,000 Sq. Ft.</a></li>
    <li><a href="#">3,000+ Sq. Ft.</a></li>
  </ul>
</div>
<div class="btn-group">
    <button type="button" class="btn btn-danger dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Price</button>
  <ul class="dropdown-menu">
    <li><a href="#">$100,000 to $200,000</a></li>
    <li><a href="#">$201,000 to $300,000</a></li>
    <li><a href="#">$301,000 to $400,000</a></li>
    <li><a href="#">$401,000 to $500,000</a></li>
    <li><a href="#">$501,000+</a></li>
  </ul>
</div>
</div>
    
    
<!--  Where visualization is built -->
    <div class="map-container">
    <div id="map"></div>
    </div>
    
    <script src="https://maps.googleapis.com/maps/api/js?sensor=true"></script>
    <script src="./lib/d3.v3.min.js"></script>
    <script type="text/javascript">

    //We used the following resources as reference to build this visualization:
    //The Google Maps Javascript API documentation https://developers.google.com/maps/documentation/javascript/tutorial
    //A D3 & Google Maps demo from Mike Bostock https://bl.ocks.org/mbostock/899711


    // Create the Google Map
    var map = new google.maps.Map(d3.select("#map").node(), {
      zoom: 18,
      center: new google.maps.LatLng(33.4484, -112.0740),
      mapTypeId: google.maps.MapTypeId.ROADMAP
        });

    // Load data

    d3.csv("data_fullset.csv", function(data) {
        data.forEach(function(d) {
            d.Lat = +d.Lat;
            d.Lon = +d.Lon;
            d.Zestimate = +d.Zestimate;
        });

        var overlay = new google.maps.OverlayView();

        overlay.onAdd = function() {
            var layer = d3.select(this.getPanes().overlayLayer).append("div").attr("class", "homes");

        //Create a scale to size the markers
        rScale = d3.scale.linear()
                    .domain([0, 10200901])
                    .range([4, 15]);

        //Draw each marker
        overlay.draw = function() {
            var projection = this.getProjection(),
            padding = 10;

            var marker = layer.selectAll("svg")
                .data(d3.entries(data))
                .each(transform)
                .enter().append("svg")
                .each(transform)
                .attr("class", "marker");

            marker.append("circle")
                    .attr("r", function(d) {
                            return rScale(d.value['Zestimate']);
                        })
                    .attr("cx", padding)
                    .attr("cy", padding);

            function transform(d) {
                d = new google.maps.LatLng(d.value['Lat'], d.value['Lon']);
                d = projection.fromLatLngToDivPixel(d);
                return d3.select(this)
                    .style("left", (d.x - padding) + "px")
                    .style("top", (d.y - padding) + "px");
            }
        };
        };
        overlay.setMap(map);
    });
    </script>
    
    <script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="https://unpkg.com/@coreui/coreui/dist/js/coreui.min.js"></script>
</body>